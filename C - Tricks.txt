**********************************
 Appendice C - Tricks
			   [0.2.0]
*********************************


Rimuovere l'errore dell'icona mancante
--------------------------------------

Se all'avvio compare l'errore ...

	Not Found: /favicon.ico

... vuol dire che Django non trova l'icona giusta da mettere nella barra del browser insieme al titolo.

Per risolvere l'anomalia e far comparire una icona personalizzata della pagina, inserire nella sezione <head>, subito prima del titolo un'istruzione come nell'esempio che segue:

	<link rel="icon" href="{% static 'img/mioLogo.svg' %}">

... che fa riferimento ad una immagine mioLogo.svg gestita nel percorso statico.

Tuttavia un metodo ancora più efficace è quello di inserire il favicon fra le url del progetto.

Diamo per assunto che i file statici sinao stati configurati correttamente; andiamo ad aggiungere il seguente codice al file url.py della root:

	.....
	from django.contrib.staticfiles.storage import staticfiles_storage
	from django.views.generic.base import RedirectView

	urlpatterns = [ .....,
		 path('favicon.ico', RedirectView.as_view(url=staticfiles_storage.url('img/mioLogo.svg'))),
		 ......	]

In questo modo andiamo a risolvere la richiesta dei browser di avere il favicon.ico


Superare l'errore "1048 last_login cannot be null" in MySQL
-----------------------------------------------------------

Durante la creazione di un utente administrator può verificarsi il seguente errore:

	django.db.utils.IntegrityError: (1048, "Column 'last_login' cannot be null")

... e la conseguente NON creazione dell'utente administrator.

Per risolvere il problema bisogna operare alcune operazioni manuali; per prima cosa in MySQL contolliamo il contenuto di django_migrations:

	mysql> USE miodatabase;
	mysql> SELECT * FROM django_migrations;

Se troviamo dentro dei record, allora cancelliamoli:

	mysql> TRUNCATE TABLE django_migrations;

Lasciamo il terminale di MySQL e rilanciamo le migrazioni in Django:

	$ python manage.py migrate --fake-initial

... ed accertiamoci che compaia il messaggio:

	0005_alter_user_last_login_null - [OK]

Se vediamo altri conflitti, è corretto perchè abbiamo bisogno di fare solo questa migrazione.


